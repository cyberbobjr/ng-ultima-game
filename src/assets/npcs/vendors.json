[
    {
        "intro": {
            "ztats": {
                "screen": "weapons"
            },
            "music": {
                "type": "shopping"
            },
            "input": {
                "type": "choice",
                "options": "bs",
                "target": "buy_sell"
            },
            "text": " Welcome to {name} {owner} says: Welcome friend! Art thou here to Buy or Sell? "
        },
        "end": {
            "music": {
                "reset": "true"
            },
            "ztats": {
                "screen": "party"
            }
        },
        "bye": {
            "end": "",
            "text": " {owner} says: Fare thee well! "
        },
        "weapon": [
            {
                "choice": "b",
                "name": "Staff",
                "price": "20"
            },
            {
                "choice": "c",
                "name": "Dagger",
                "price": "2"
            },
            {
                "choice": "d",
                "name": "Sling",
                "price": "25"
            },
            {
                "choice": "e",
                "name": "Mace",
                "price": "100"
            },
            {
                "choice": "f",
                "name": "Axe",
                "price": "225"
            },
            {
                "choice": "g",
                "name": "Sword",
                "price": "300"
            },
            {
                "choice": "h",
                "name": "Bow",
                "price": "250"
            },
            {
                "choice": "i",
                "name": "Crossbow",
                "price": "600"
            },
            {
                "choice": "j",
                "name": "Flaming Oil",
                "price": "5"
            },
            {
                "choice": "k",
                "name": "Halberd",
                "price": "350"
            },
            {
                "choice": "l",
                "name": "Magic Axe",
                "price": "1500"
            },
            {
                "choice": "m",
                "name": "Magic Sword",
                "price": "2500"
            },
            {
                "choice": "n",
                "name": "Magic Bow",
                "price": "2000"
            },
            {
                "choice": "o",
                "name": "Magic Wand",
                "price": "5000"
            },
            {
                "choice": "p",
                "name": "Mystic Sword",
                "price": "7000"
            }
        ],
        "buy_sell": [
            {
                "default": "true",
                "redirect": "bye"
            },
            {
                "input": {
                    "type": "choice",
                    "options": "{inventory_choices}",
                    "target": "check_money"
                },
                "choice": "b",
                "text": " Very Good! We Have: {show_inventory:show_item} Your Interest? "
            },
            {
                "redirect": {
                    "target": "you_sell"
                },
                "choice": "s",
                "text": " Excellent! Which wouldst "
            }
        ],
        "buy_more": [
            {
                "default": "true",
                "redirect": "bye"
            },
            {
                "redirect": {
                    "target": "buy_sell",
                    "choice": "b"
                },
                "choice": "y"
            }
        ],
        "show_item": "{toupper({choice})}-{name}",
        "check_money": [
            {
                "choice": "null",
                "redirect": "bye"
            },
            {
                "context": {
                    "name": "weapon"
                },
                "var": [
                    {
                        "name": "weapon",
                        "value": "{$choice}"
                    },
                    {
                        "name": "cost",
                        "value": "{price}"
                    },
                    {
                        "name": "quantity",
                        "value": "1"
                    }
                ],
                "if": [
                    {
                        "redirect": {
                            "target": "anything_else_buy"
                        },
                        "test": "{party:gold}<{price}",
                        "text": " You have not the funds for even one! "
                    },
                    {
                        "redirect": {
                            "target": "howmany_buy"
                        },
                        "test": "{party:gold}>={math({price}*2)}"
                    }
                ],
                "include": {
                    "script": "tell_about",
                    "choice": "{$choice}"
                },
                "input": {
                    "type": "choice",
                    "options": "yn",
                    "target": "take_it"
                },
                "text": " Take it? "
            }
        ],
        "not_enough_money": {
            "redirect": {
                "target": "anything_else_buy"
            },
            "text": " I fear you have not the funds, perhaps something else. "
        },
        "take_it": [
            {
                "default": "true",
                "redirect": "toobad"
            },
            {
                "include": {
                    "script": "buy"
                },
                "choice": "y"
            }
        ],
        "tell_about": [
            {
                "choice": "b",
                "text": " We are the only staff makers in Britannia, yet sell them for only {price}gp. "
            },
            {
                "choice": "c",
                "text": " We sell the most deadly of daggers, a bargain at only {price}gp each. "
            },
            {
                "choice": "d",
                "text": " Our slings are made from only the finest guy and leather, 'Tis yours for {price}gp. "
            },
            {
                "choice": "e",
                "text": " These maces have a hardened shaft and a 5lb head fairly priced at {price}gp. "
            },
            {
                "choice": "f",
                "text": " Notice the fine workmanship on this axe, you'll agree {price}gp is a good price. "
            },
            {
                "choice": "g",
                "text": " The fine work on these swords will be the dread of thy foes, for {price}gp. "
            },
            {
                "choice": "h",
                "text": " Our bows are made of finest yew, and the arrows willow, a steal at {price}gp. "
            },
            {
                "choice": "i",
                "text": " Crossbows made by Iolo the Bard are the finest in the world, your for {price}gp. "
            },
            {
                "choice": "j",
                "text": " Flasks of oil make great weapons and creates a wall of flame too. {price}gp each. "
            },
            {
                "choice": "k",
                "text": " A Halberd is a mighty weapon to attack over obstacles; a must and only {price}gp. "
            },
            {
                "choice": "l",
                "text": " This magical axe can be thrown at thy enemy and will then return all for {price}gp. "
            },
            {
                "choice": "m",
                "text": " Magical swords such as these are rare indeed I will part with one for {price}gp. "
            },
            {
                "choice": "n",
                "text": " A magical bow will keep thy enemies far away or dead! A must for {price}gp! "
            },
            {
                "choice": "o",
                "text": " This magic wand casts mighty blue bolts to strike down thy foes, {price}gp. "
            }
        ],
        "howmany_buy": {
            "input": {
                "name": "quantity",
                "type": "number",
                "maxlen": "2",
                "target": "buy"
            },
            "text": " How many would you like? "
        },
        "buy": [
            {
                "choice": "null",
                "redirect": "toobad"
            },
            {
                "if": [
                    {
                        "test": "{$quantity}==0",
                        "redirect": "anything_else_buy"
                    },
                    {
                        "test": "{party:gold}<{math({$quantity}*{price})}",
                        "redirect": "not_enough_money"
                    }
                ],
                "pay": {
                    "price": "{$cost}",
                    "quantity": "{$quantity}",
                    "cantpay": "check_money"
                },
                "add": {
                    "type": "weapon",
                    "subtype": "{$weapon}",
                    "quantity": "{$quantity}"
                },
                "redirect": {
                    "target": "anything_else_buy"
                },
                "text": " {owner} says: A fine choice! "
            }
        ],
        "toobad": {
            "redirect": {
                "target": "anything_else_buy"
            },
            "text": " Too bad. "
        },
        "anything_else_buy": {
            "unset_context": "",
            "input": {
                "type": "choice",
                "options": "yn",
                "target": "buy_more"
            },
            "text": " Anything else? "
        },
        "you_sell": [
            {
                "choice": "null",
                "redirect": "bye"
            },
            {
                "input": {
                    "type": "choice",
                    "options": "bcdefghijklmnop",
                    "target": "sell_weapon"
                },
                "text": " You sell: "
            }
        ],
        "sell_weapon": [
            {
                "choice": "null",
                "redirect": "bye"
            },
            {
                "context": {
                    "name": "weapon"
                },
                "var": [
                    {
                        "name": "weapon",
                        "value": "{$choice}"
                    },
                    {
                        "name": "price",
                        "value": "{math({price}/2)}"
                    }
                ],
                "if": [
                    {
                        "test": "{party:weapon:{name}}==0",
                        "redirect": "you_sell"
                    },
                    {
                        "test": "{party:weapon:{name}}>1",
                        "redirect": "sell_many"
                    }
                ],
                "redirect": {
                    "target": "sell_one"
                }
            }
        ],
        "sell_one": {
            "var": {
                "name": "quantity",
                "value": "1"
            },
            "input": {
                "type": "choice",
                "options": "yn",
                "target": "sell"
            },
            "text": " I will give you {$price}gp for that {name}. Deal? "
        },
        "sell_many": {
            "input": {
                "name": "quantity",
                "type": "number",
                "maxlen": "2",
                "target": "sell_many_offer"
            },
            "text": " How many {name}s would you wish to sell? "
        },
        "sell_many_offer": [
            {
                "choice": "null",
                "redirect": "bye"
            },
            {
                "if": [
                    {
                        "test": "{$quantity}==0",
                        "redirect": "sell",
                        "choice": "n"
                    },
                    {
                        "test": "{$quantity}>{party:weapon:{name}}",
                        "redirect": "dont_have_that_many"
                    }
                ],
                "input": {
                    "type": "choice",
                    "options": "yn",
                    "target": "sell"
                },
                "text": " I will give you {math({$price}*{$quantity})}gp for them. Deal? "
            }
        ],
        "dont_have_that_many": {
            "end": "",
            "text": " You don't have that many swine! "
        },
        "sell": [
            {
                "default": "true",
                "redirect": "bye"
            },
            {
                "redirect": {
                    "target": "you_sell"
                },
                "choice": "n",
                "text": " Hmmph. What else would "
            },
            {
                "lose": {
                    "type": "weapon",
                    "subtype": "{$weapon}",
                    "quantity": "{$quantity}"
                },
                "add": {
                    "type": "gold",
                    "quantity": "{math({$quantity}*{$price})}"
                },
                "unset_context": "",
                "redirect": {
                    "target": "you_sell"
                },
                "choice": "y",
                "text": " Fine! What else? "
            }
        ],
        "vendor": [
            {
                "weapon": [
                    {
                        "choice": "b",
                        "name": "Staff",
                        "price": "20"
                    },
                    {
                        "choice": "c",
                        "name": "Dagger",
                        "price": "2"
                    },
                    {
                        "choice": "d",
                        "name": "Sling",
                        "price": "25"
                    },
                    {
                        "choice": "g",
                        "name": "Sword",
                        "price": "300"
                    }
                ],
                "id": "Britain",
                "name": "Windsor Weaponry",
                "owner": "Winston"
            },
            {
                "weapon": [
                    {
                        "choice": "f",
                        "name": "Axe",
                        "price": "225"
                    },
                    {
                        "choice": "g",
                        "name": "Sword",
                        "price": "300"
                    },
                    {
                        "choice": "i",
                        "name": "Crossbow",
                        "price": "600"
                    },
                    {
                        "choice": "k",
                        "name": "Halberd",
                        "price": "350"
                    }
                ],
                "id": "Jhelom",
                "name": "Willard's Weaponry",
                "owner": "Willard"
            },
            {
                "weapon": [
                    {
                        "choice": "e",
                        "name": "Mace",
                        "price": "100"
                    },
                    {
                        "choice": "k",
                        "name": "Halberd",
                        "price": "300"
                    },
                    {
                        "choice": "l",
                        "name": "Magic Axe",
                        "price": "1500"
                    },
                    {
                        "choice": "m",
                        "name": "Magic Sword",
                        "price": "2500"
                    }
                ],
                "id": "Minoc",
                "name": "The Iron Works",
                "owner": "Peter"
            },
            {
                "weapon": [
                    {
                        "choice": "e",
                        "name": "Mace",
                        "price": "100"
                    },
                    {
                        "choice": "f",
                        "name": "Axe",
                        "price": "225"
                    },
                    {
                        "choice": "g",
                        "name": "Sword",
                        "price": "300"
                    },
                    {
                        "choice": "h",
                        "name": "Bow",
                        "price": "250"
                    }
                ],
                "id": "Trinsic",
                "name": "Dueling Weapons",
                "owner": "Jumar"
            },
            {
                "weapon": [
                    {
                        "choice": "i",
                        "name": "Crossbow",
                        "price": "600"
                    },
                    {
                        "choice": "j",
                        "name": "Flaming Oil",
                        "price": "5"
                    },
                    {
                        "choice": "n",
                        "name": "Magic Bow",
                        "price": "2000"
                    },
                    {
                        "choice": "o",
                        "name": "Magic Wand",
                        "price": "5000"
                    }
                ],
                "id": "Buccaneers Den",
                "name": "Hook's Arms",
                "owner": "Hook"
            },
            {
                "weapon": [
                    {
                        "choice": "c",
                        "name": "Dagger",
                        "price": "2"
                    },
                    {
                        "choice": "d",
                        "name": "Sling",
                        "price": "25"
                    },
                    {
                        "choice": "h",
                        "name": "Bow",
                        "price": "250"
                    },
                    {
                        "choice": "j",
                        "name": "Flaming Oil",
                        "price": "5"
                    }
                ],
                "id": "Vesper",
                "name": "Village Arms",
                "owner": "Wendy"
            }
        ],
        "id": "Weapons",
        "noun": "weapon"
    },
    {
        "intro": {
            "ztats": {
                "screen": "armor"
            },
            "music": {
                "type": "shopping"
            },
            "input": {
                "type": "choice",
                "options": "bs",
                "target": "buy_sell"
            },
            "text": " Welcome to {name} {owner} says: Welcome friend! Want to Buy or Sell? "
        },
        "end": {
            "music": {
                "reset": "true"
            },
            "ztats": {
                "screen": "party"
            }
        },
        "bye": {
            "end": "",
            "text": " {owner} says: Good Bye. "
        },
        "armor": [
            {
                "choice": "b",
                "name": "Cloth",
                "price": "50"
            },
            {
                "choice": "c",
                "name": "Leather",
                "price": "200"
            },
            {
                "choice": "d",
                "name": "Chain Mail",
                "price": "600"
            },
            {
                "choice": "e",
                "name": "Plate Mail",
                "price": "2000"
            },
            {
                "choice": "f",
                "name": "Magic Chain",
                "price": "4000"
            },
            {
                "choice": "g",
                "name": "Magic Plate",
                "price": "7000"
            },
            {
                "choice": "h",
                "name": "Mystic Robe",
                "price": "9000"
            }
        ],
        "buy_sell": [
            {
                "default": "true",
                "redirect": "bye"
            },
            {
                "input": {
                    "type": "choice",
                    "options": "{inventory_choices}",
                    "target": "check_money"
                },
                "choice": "b",
                "text": " Well then, We've got: {show_inventory:show_item} What'll it be? "
            },
            {
                "redirect": {
                    "target": "you_sell"
                },
                "choice": "s",
                "text": " What will "
            }
        ],
        "buy_more": [
            {
                "default": "true",
                "redirect": "bye"
            },
            {
                "redirect": {
                    "target": "buy_sell",
                    "choice": "b"
                },
                "choice": "y"
            }
        ],
        "show_item": "{toupper({choice})} {name}",
        "check_money": [
            {
                "choice": "null",
                "redirect": "bye"
            },
            {
                "context": {
                    "name": "armor"
                },
                "var": [
                    {
                        "name": "armor",
                        "value": "{$choice}"
                    },
                    {
                        "name": "quantity",
                        "value": "1"
                    }
                ],
                "if": [
                    {
                        "redirect": {
                            "target": "anything_else_buy"
                        },
                        "test": "{party:gold}<{price}",
                        "text": " You have not the funds for even one! "
                    },
                    {
                        "redirect": {
                            "target": "howmany_buy"
                        },
                        "test": "{party:gold}>={math({price}*2)}"
                    }
                ],
                "include": {
                    "script": "tell_about",
                    "choice": "{$choice}"
                },
                "input": {
                    "type": "choice",
                    "options": "yn",
                    "target": "take_it"
                },
                "text": " Take it? "
            }
        ],
        "not_enough_money": {
            "redirect": {
                "target": "anything_else_buy"
            },
            "text": " You don't have enough gold. Maybe something cheaper? "
        },
        "take_it": [
            {
                "default": "true",
                "redirect": "toobad"
            },
            {
                "include": {
                    "script": "buy"
                },
                "choice": "y"
            }
        ],
        "tell_about": [
            {
                "choice": "b",
                "text": " Cloth Armour is good for a tight budget, Fairly priced at {price}gp. "
            },
            {
                "choice": "c",
                "text": " Leather Armour is both supple and strong, and costs a mere {price}gp. A Bargain! "
            },
            {
                "choice": "d",
                "text": " Chail Mail is the armour used by more warriors than all others. Ours costs {price}gp. "
            },
            {
                "choice": "e",
                "text": " Full Plate armour is the ultimate in non-magical armour. Get yours for {price}gp. "
            },
            {
                "choice": "f",
                "text": " Magic Armour is rare and expensive. This chain sells for {price}gp. "
            },
            {
                "choice": "g",
                "text": " Magic Plate Armour is the best known protection. Only we have it. Cost: {price}gp. "
            }
        ],
        "howmany_buy": {
            "input": {
                "name": "quantity",
                "type": "number",
                "target": "buy"
            },
            "text": " How many would you like? "
        },
        "buy": [
            {
                "choice": "null",
                "redirect": "toobad"
            },
            {
                "if": [
                    {
                        "test": "{$quantity}==0",
                        "redirect": "anything_else_buy"
                    },
                    {
                        "test": "{party:gold}<{math({$quantity}*{price})}",
                        "redirect": "not_enough_money"
                    }
                ],
                "pay": {
                    "price": "{price}",
                    "quantity": "{$quantity}",
                    "cantpay": "check_money"
                },
                "add": {
                    "type": "armor",
                    "subtype": "{$armor}",
                    "quantity": "{$quantity}"
                },
                "redirect": {
                    "target": "anything_else_buy"
                },
                "text": " {owner} says: Good choice! "
            }
        ],
        "toobad": {
            "redirect": {
                "target": "anything_else_buy"
            },
            "text": " Too bad. "
        },
        "anything_else_buy": {
            "unset_context": "",
            "input": {
                "type": "choice",
                "options": "yn",
                "target": "buy_more"
            },
            "text": " Anything else? "
        },
        "you_sell": {
            "input": {
                "type": "choice",
                "options": "bcdefgh",
                "target": "sell_armor"
            },
            "text": " You sell: "
        },
        "sell_armor": [
            {
                "choice": "null",
                "redirect": "bye"
            },
            {
                "context": {
                    "name": "armor"
                },
                "var": [
                    {
                        "name": "armor",
                        "value": "{$choice}"
                    },
                    {
                        "name": "price",
                        "value": "{math({price}/2)}"
                    }
                ],
                "if": [
                    {
                        "redirect": {
                            "target": "bye"
                        },
                        "test": "{party:armor:{name}}==0",
                        "text": " Come on, you don't own any. "
                    },
                    {
                        "test": "{party:armor:{name}}>1",
                        "redirect": "sell_many"
                    }
                ],
                "redirect": {
                    "target": "sell_one"
                }
            }
        ],
        "sell_one": {
            "var": {
                "name": "quantity",
                "value": "1"
            },
            "input": {
                "type": "choice",
                "options": "yn",
                "target": "sell"
            },
            "text": " I will give you {$price}gp for that {name}. Deal? "
        },
        "sell_many": {
            "input": {
                "name": "quantity",
                "type": "number",
                "target": "sell_many_offer"
            },
            "text": " How many {name}s would you wish to sell? "
        },
        "sell_many_offer": [
            {
                "choice": "null",
                "redirect": "bye"
            },
            {
                "if": [
                    {
                        "test": "{$quantity}==0",
                        "redirect": "sell",
                        "choice": "n"
                    },
                    {
                        "test": "{$quantity}>{party:armor:{name}}",
                        "redirect": "dont_have_that_many"
                    }
                ],
                "var": {
                    "name": "price",
                    "value": "{math({$price}*{$quantity})}"
                },
                "input": {
                    "type": "choice",
                    "options": "yn",
                    "target": "sell"
                },
                "text": " I will give you {$price}gp for them. Deal? "
            }
        ],
        "dont_have_that_many": {
            "end": "",
            "text": " You don't have that many swine! "
        },
        "sell": [
            {
                "default": "true",
                "redirect": "bye"
            },
            {
                "unset_context": "",
                "redirect": {
                    "target": "you_sell"
                },
                "choice": "n",
                "text": " Harumph. What else would "
            },
            {
                "lose": {
                    "type": "armor",
                    "subtype": "{$armor}",
                    "quantity": "{$quantity}"
                },
                "add": {
                    "type": "gold",
                    "quantity": "{$price}"
                },
                "unset_context": "",
                "redirect": {
                    "target": "you_sell"
                },
                "choice": "y",
                "text": " Fine! What else? "
            }
        ],
        "vendor": [
            {
                "armor": [
                    {
                        "choice": "b",
                        "name": "Cloth",
                        "price": "50"
                    },
                    {
                        "choice": "c",
                        "name": "Leather",
                        "price": "200"
                    },
                    {
                        "choice": "d",
                        "name": "Chain Mail",
                        "price": "600"
                    }
                ],
                "id": "Britain",
                "name": "Winsdor Armour",
                "owner": "Winston"
            },
            {
                "armor": [
                    {
                        "choice": "d",
                        "name": "Chain Mail",
                        "price": "600"
                    },
                    {
                        "choice": "e",
                        "name": "Plate Mail",
                        "price": "2000"
                    },
                    {
                        "choice": "f",
                        "name": "Magic Chain",
                        "price": "4000"
                    },
                    {
                        "choice": "g",
                        "name": "Magic Plate",
                        "price": "7000"
                    }
                ],
                "id": "Jhelom",
                "name": "Valiant's Armour",
                "owner": "Valiant"
            },
            {
                "armor": [
                    {
                        "choice": "b",
                        "name": "Cloth",
                        "price": "50"
                    },
                    {
                        "choice": "d",
                        "name": "Chain Mail",
                        "price": "600"
                    },
                    {
                        "choice": "f",
                        "name": "Magic Chain",
                        "price": "4000"
                    }
                ],
                "id": "Trinsic",
                "name": "Duelling Armour",
                "owner": "Jean"
            },
            {
                "armor": [
                    {
                        "choice": "b",
                        "name": "Cloth",
                        "price": "50"
                    },
                    {
                        "choice": "c",
                        "name": "Leather",
                        "price": "200"
                    }
                ],
                "id": "Paws",
                "name": "Light Armour",
                "owner": "Pierre"
            },
            {
                "armor": [
                    {
                        "choice": "b",
                        "name": "Cloth",
                        "price": "50"
                    },
                    {
                        "choice": "c",
                        "name": "Leather",
                        "price": "200"
                    },
                    {
                        "choice": "d",
                        "name": "Chain Mail",
                        "price": "600"
                    }
                ],
                "id": "Buccaneers Den",
                "name": "Basic Armour",
                "owner": "Limpy"
            }
        ],
        "id": "Armor",
        "noun": "armor"
    },
    {
        "intro": {
            "music": {
                "type": "shopping"
            },
            "if": {
                "test": "{party:gold}<{price}",
                "redirect": "come_back"
            },
            "input": {
                "type": "choice",
                "options": "yn",
                "target": "ask"
            },
            "text": " Welcome to {name} {owner} says: Good day, and Welcome friend. May I interest you in some rations? "
        },
        "end": {
            "music": {
                "reset": "true"
            }
        },
        "ask": [
            {
                "default": "true",
                "redirect": "bye"
            },
            {
                "redirect": {
                    "target": "howmany"
                },
                "choice": "y",
                "text": " We have the best adventure rations, {quant} for only {price}gp. "
            }
        ],
        "howmany": {
            "input": {
                "name": "quantity",
                "type": "number",
                "target": "buy"
            },
            "text": "How many packs of {quant} would you like? "
        },
        "buy": [
            {
                "redirect": {
                    "target": "bye"
                },
                "choice": "null",
                "text": " Too bad. Maybe next time. "
            },
            {
                "pay": {
                    "price": "{price}",
                    "quantity": "{$quantity}",
                    "cantpay": "cantpay"
                },
                "add": {
                    "type": "food",
                    "quantity": "{math({quant}*{$quantity})}"
                },
                "if": {
                    "test": "{party:gold}<{price}",
                    "redirect": "come_again"
                },
                "input": {
                    "type": "choice",
                    "options": "yn",
                    "target": "ask"
                },
                "text": " Thank you. Anything else? "
            }
        ],
        "cantpay": {
            "redirect": {
                "target": "howmany"
            },
            "text": " You can only afford {math({party:gold}/{price})} packs. "
        },
        "come_back": {
            "end": "",
            "text": " Come back when you have some money! "
        },
        "come_again": {
            "end": "",
            "text": " Come again! "
        },
        "bye": {
            "end": "",
            "text": " Goodbye. Come again! "
        },
        "vendor": [
            {
                "id": "Moonglow",
                "name": "The Sage Deli",
                "owner": "Shaman",
                "price": "25",
                "quant": "25"
            },
            {
                "id": "Britain",
                "name": "Adventure Food",
                "owner": "Windrick",
                "price": "40",
                "quant": "25"
            },
            {
                "id": "Yew",
                "name": "The Dry Goods",
                "owner": "Donnar",
                "price": "35",
                "quant": "25"
            },
            {
                "id": "Skara Brae",
                "name": "Food For Thought",
                "owner": "Mintol",
                "price": "20",
                "quant": "25"
            },
            {
                "id": "Paws",
                "name": "The Market",
                "owner": "Max",
                "price": "30",
                "quant": "25"
            }
        ],
        "id": "Food"
    },
    {
        "intro": {
            "music": {
                "type": "shopping"
            },
            "redirect": {
                "target": "whatll_it_be"
            },
            "text": " {owner} says: Welcome to {name} "
        },
        "end": {
            "music": {
                "reset": "true"
            }
        },
        "ask": [
            {
                "default": "true",
                "redirect": "bye"
            },
            {
                "choice": "y",
                "redirect": "whatll_it_be"
            }
        ],
        "whatll_it_be": {
            "input": {
                "type": "choice",
                "options": "fa",
                "target": "buy"
            },
            "text": " {owner} says: What'll it be, Food er Ale? "
        },
        "bye": {
            "end": "",
            "text": " See ya mate! "
        },
        "buy": [
            {
                "default": "true",
                "redirect": "bye"
            },
            {
                "redirect": {
                    "target": "how_many_plates"
                },
                "choice": "f",
                "text": " Our specialty is {specialty}, which costs {spec_price}gp. "
            },
            {
                "input": {
                    "name": "price",
                    "type": "number",
                    "maxlen": "2",
                    "target": "ale_buy"
                },
                "choice": "a",
                "text": " Here's a mug of our best. That'll be {ale_price}gp. You pay? "
            }
        ],
        "how_many_plates": {
            "input": {
                "name": "quantity",
                "type": "number",
                "target": "food_buy"
            },
            "text": "How many plates would you like? "
        },
        "food_buy": [
            {
                "choice": "null",
                "redirect": "bye"
            },
            {
                "if": {
                    "test": "{$quantity}==0",
                    "redirect": "bye"
                },
                "pay": {
                    "price": "{spec_price}",
                    "quantity": "{$quantity}",
                    "cantpay": "cantpay_food"
                },
                "add": {
                    "type": "food",
                    "quantity": "{$quantity}"
                },
                "redirect": {
                    "target": "something_else"
                },
                "text": " Here ye arr. "
            }
        ],
        "cantpay_food": {
            "redirect": {
                "target": "how_many_plates"
            },
            "text": " Ya can only afford {math({party:gold}/{spec_price})} plates. "
        },
        "something_else": {
            "input": {
                "type": "choice",
                "options": "yn",
                "target": "ask"
            },
            "text": " Somethin' else? "
        },
        "ale_buy": [
            {
                "choice": "null",
                "redirect": "bye"
            },
            {
                "if": [
                    {
                        "end": "",
                        "test": "{$price}<{ale_price}",
                        "text": " Won't pay, eh. Ya scum, be gone fore ey call the guards! "
                    },
                    {
                        "test": "{$price}={ale_price}",
                        "redirect": "something_else"
                    },
                    {
                        "var": {
                            "name": "tip_total",
                            "value": "{math({$price}-{ale_price})}"
                        },
                        "input": {
                            "name": "choice",
                            "type": "text",
                            "target": "topic"
                        },
                        "test": "{$price}>{ale_price}",
                        "text": " What'd ya like to know friend? "
                    }
                ],
                "pay": {
                    "price": "{$price}",
                    "quantity": "1",
                    "cantpay": "cantpay_ale"
                }
            }
        ],
        "cantpay_ale": {
            "redirect": {
                "target": "bye"
            },
            "text": " It seems that you have not the gold. Good Day! "
        },
        "topic": {
            "if": {
                "test": "{isempty({$choice})}",
                "redirect": "something_else"
            },
            "redirect": {
                "target": "something_else"
            },
            "default": "true",
            "text": " 'fraid I can't help ya there friend! "
        },
        "reply": [
            {
                "redirect": {
                    "target": "something_else"
                },
                "choice": "black stone",
                "text": " {owner} says: Ah, the Black Stone. Yes I've heard of it. But, the only one who knows where it lies is the wizard Merlin. "
            },
            {
                "redirect": {
                    "target": "something_else"
                },
                "choice": "sextant",
                "text": " {owner} says: For navigation a Sextant is vital... Ask for item \"D\" in the Guild shops! "
            },
            {
                "redirect": {
                    "target": "something_else"
                },
                "choice": "white stone",
                "text": " Now let me see... Yes it was the old Hermit... Sloven! He is tough to find, lives near Lock Lake I hear. "
            },
            {
                "redirect": {
                    "target": "something_else"
                },
                "choice": "mandrake",
                "text": " {owner} says: The last person I knew that had any Mandrake was an old alchemist named Calumny. "
            },
            {
                "redirect": {
                    "target": "something_else"
                },
                "choice": "skull",
                "text": " {owner} says: If thou must know of that evilest of all things... find the beggar Jude. He is very very poor! "
            },
            {
                "redirect": {
                    "target": "something_else"
                },
                "choice": "nightshade",
                "text": " {owner} says: Of Nightshade I know but this... Seek out Virgil or thou shalt miss! Try in Trinsic! "
            }
        ],
        "save": {
            "context": {
                "name": "topic"
            },
            "var": [
                {
                    "name": "topic",
                    "value": "{$choice}"
                },
                {
                    "name": "payment",
                    "value": "0"
                }
            ],
            "redirect": {
                "target": "foggy"
            }
        },
        "sorry": {
            "redirect": {
                "target": "something_else"
            },
            "text": " Sorry, I could not help ya mate! "
        },
        "foggy": [
            {
                "choice": "null",
                "redirect": "sorry"
            },
            {
                "pay": {
                    "price": "payment",
                    "quantity": "1",
                    "cantpay": "cantpay_topic"
                },
                "var": {
                    "name": "tip_total",
                    "value": "{math({$tip_total}+{$payment})}"
                },
                "if": [
                    {
                        "test": "{price}<={$tip_total}",
                        "choice": "{$topic}",
                        "redirect": "reply"
                    },
                    {
                        "test": "{$payment}==0",
                        "redirect": "sorry"
                    }
                ],
                "input": {
                    "name": "payment",
                    "type": "number",
                    "maxlen": "2"
                },
                "redirect": {
                    "target": "foggy"
                },
                "text": " That subject is a bit foggy, perhaps more gold will refresh my memory. You give: \t "
            }
        ],
        "cantpay_topic": {
            "redirect": {
                "target": "sorry"
            },
            "text": " Ye don't have that mate! "
        },
        "vendor": [
            {
                "topic": [
                    {
                        "choice": "black stone",
                        "price": "20",
                        "redirect": "save"
                    },
                    {
                        "choice": "sextant",
                        "price": "30",
                        "redirect": "save"
                    },
                    {
                        "choice": "white stone",
                        "price": "10",
                        "redirect": "save"
                    },
                    {
                        "choice": "mandrake",
                        "price": "40",
                        "redirect": "save"
                    },
                    {
                        "choice": "skull",
                        "price": "99",
                        "redirect": "save"
                    },
                    {
                        "choice": "nightshade",
                        "price": "25",
                        "redirect": "save"
                    }
                ],
                "id": "Britain",
                "name": "Jolly Spirits",
                "owner": "Sam",
                "specialty": "Lamb Chops",
                "spec_price": "4",
                "ale_price": "2"
            },
            {
                "topic": [
                    {
                        "choice": "sextant",
                        "price": "30",
                        "redirect": "save"
                    },
                    {
                        "choice": "white stone",
                        "price": "10",
                        "redirect": "save"
                    },
                    {
                        "choice": "mandrake",
                        "price": "40",
                        "redirect": "save"
                    },
                    {
                        "choice": "skull",
                        "price": "99",
                        "redirect": "save"
                    },
                    {
                        "choice": "nightshade",
                        "price": "25",
                        "redirect": "save"
                    }
                ],
                "id": "Jhelom",
                "name": "The Bloody Pub",
                "owner": "Celestial",
                "specialty": "Dragon Tartar",
                "spec_price": "2",
                "ale_price": "2"
            },
            {
                "topic": [
                    {
                        "choice": "white stone",
                        "price": "10",
                        "redirect": "save"
                    },
                    {
                        "choice": "mandrake",
                        "price": "40",
                        "redirect": "save"
                    },
                    {
                        "choice": "skull",
                        "price": "99",
                        "redirect": "save"
                    },
                    {
                        "choice": "nightshade",
                        "price": "25",
                        "redirect": "save"
                    }
                ],
                "id": "Trinsic",
                "name": "The Keg Tap",
                "owner": "Terran",
                "specialty": "Brown Beans",
                "spec_price": "3",
                "ale_price": "2"
            },
            {
                "topic": [
                    {
                        "choice": "mandrake",
                        "price": "40",
                        "redirect": "save"
                    },
                    {
                        "choice": "skull",
                        "price": "99",
                        "redirect": "save"
                    },
                    {
                        "choice": "nightshade",
                        "price": "25",
                        "redirect": "save"
                    }
                ],
                "id": "Paws",
                "name": "Folley Tavern",
                "owner": "Greg 'n Rob",
                "specialty": "Folley Filet",
                "spec_price": "2",
                "ale_price": "2"
            },
            {
                "topic": [
                    {
                        "choice": "skull",
                        "price": "99",
                        "redirect": "save"
                    },
                    {
                        "choice": "nightshade",
                        "price": "25",
                        "redirect": "save"
                    }
                ],
                "id": "Buccaneers Den",
                "name": "Captain Black Tavern",
                "owner": "The Cap'n",
                "specialty": "Dog Meat Pie",
                "spec_price": "4",
                "ale_price": "2"
            },
            {
                "topic": {
                    "choice": "nightshade",
                    "price": "25",
                    "redirect": "save"
                },
                "id": "Vesper",
                "name": "Axe 'n Ale",
                "owner": "Arron",
                "specialty": "Green Granukit",
                "spec_price": "2",
                "ale_price": "2"
            }
        ],
        "id": "Tavern"
    },
    {
        "intro": {
            "music": {
                "type": "shopping"
            },
            "ztats": {
                "screen": "reagents"
            },
            "input": {
                "type": "choice",
                "options": "yn",
                "target": "show_reagents"
            },
            "text": " A blind woman turns to you and says: Welcome to {name} I am {owner} Are you in need of Reagents? "
        },
        "end": {
            "music": {
                "reset": "true"
            },
            "ztats": {
                "screen": "party"
            }
        },
        "bye": {
            "end": "",
            "text": " {owner} says: Perhaps another time then.... and slowly turns away. "
        },
        "show_reagents": [
            {
                "default": "true",
                "redirect": "bye"
            },
            {
                "input": {
                    "type": "choice",
                    "options": "{inventory_choices}",
                    "target": "how_many"
                },
                "choice": "y",
                "text": " Very well, I have {show_inventory:show_item} Your Interest: "
            }
        ],
        "show_item": "{toupper({choice})}-{name}",
        "how_many": [
            {
                "choice": "null",
                "redirect": "bye"
            },
            {
                "context": {
                    "name": "reagent"
                },
                "var": {
                    "name": "reagent",
                    "value": "{$choice}"
                },
                "input": {
                    "name": "quantity",
                    "type": "number",
                    "target": "you_pay"
                },
                "text": " Very well, we sell {name} for {price}gp. How many would you like? "
            }
        ],
        "i_see_then": {
            "redirect": {
                "target": "anything_else"
            },
            "text": " I see, then "
        },
        "anything_else": {
            "unset_context": "",
            "input": {
                "type": "choice",
                "options": "yn",
                "target": "show_reagents"
            },
            "text": " Anything else? "
        },
        "you_pay": [
            {
                "choice": "null",
                "redirect": "i_see_then"
            },
            {
                "if": {
                    "test": "{$quantity}==0",
                    "redirect": "i_see_then"
                },
                "input": {
                    "name": "price",
                    "type": "number",
                    "target": "buy"
                },
                "text": " Very good, that will be {math({price}*{$quantity})}gp. You pay: "
            }
        ],
        "buy": [
            {
                "choice": "null",
                "redirect": "i_see_then"
            },
            {
                "if": [
                    {
                        "test": "{$price}==0",
                        "redirect": "i_see_then"
                    },
                    {
                        "karma": {
                            "action": "cheated_merchant"
                        },
                        "redirect": {
                            "target": "anything_else"
                        },
                        "test": "{$price}<{math({price}*{$quantity})}"
                    }
                ],
                "pay": {
                    "price": "{$price}",
                    "quantity": "1",
                    "cantpay": "cantpay"
                },
                "add": {
                    "type": "reagent",
                    "subtype": "{type}",
                    "quantity": "{$quantity}"
                },
                "karma": {
                    "action": "honest_to_merchant"
                },
                "redirect": {
                    "target": "anything_else"
                },
                "text": " Very good. "
            }
        ],
        "cantpay": {
            "redirect": {
                "target": "anything_else"
            },
            "text": " It seems you have not the gold! "
        },
        "vendor": [
            {
                "reagent": [
                    {
                        "choice": "a",
                        "name": "Sulfurous Ash",
                        "type": "ash",
                        "price": "2"
                    },
                    {
                        "choice": "b",
                        "name": "Ginseng",
                        "type": "ginseng",
                        "price": "5"
                    },
                    {
                        "choice": "c",
                        "name": "Garlic",
                        "type": "garlic",
                        "price": "6"
                    },
                    {
                        "choice": "d",
                        "name": "Spider Silk",
                        "type": "silk",
                        "price": "3"
                    },
                    {
                        "choice": "e",
                        "name": "Blood Moss",
                        "type": "moss",
                        "price": "6"
                    },
                    {
                        "choice": "f",
                        "name": "Black Pearl",
                        "type": "pearl",
                        "price": "9"
                    }
                ],
                "id": "Moonglow",
                "name": "Magical Herbs",
                "owner": "Margot"
            },
            {
                "reagent": [
                    {
                        "choice": "a",
                        "name": "Sulfurous Ash",
                        "type": "ash",
                        "price": "2"
                    },
                    {
                        "choice": "b",
                        "name": "Ginseng",
                        "type": "ginseng",
                        "price": "4"
                    },
                    {
                        "choice": "c",
                        "name": "Garlic",
                        "type": "garlic",
                        "price": "9"
                    },
                    {
                        "choice": "d",
                        "name": "Spider Silk",
                        "type": "silk",
                        "price": "6"
                    },
                    {
                        "choice": "e",
                        "name": "Blood Moss",
                        "type": "moss",
                        "price": "4"
                    },
                    {
                        "choice": "f",
                        "name": "Black Pearl",
                        "type": "pearl",
                        "price": "8"
                    }
                ],
                "id": "Skara Brae",
                "name": "Herbs and Spice",
                "owner": "Sasha"
            },
            {
                "reagent": [
                    {
                        "choice": "a",
                        "name": "Sulfurous Ash",
                        "type": "ash",
                        "price": "3"
                    },
                    {
                        "choice": "b",
                        "name": "Ginseng",
                        "type": "ginseng",
                        "price": "4"
                    },
                    {
                        "choice": "c",
                        "name": "Garlic",
                        "type": "garlic",
                        "price": "2"
                    },
                    {
                        "choice": "d",
                        "name": "Spider Silk",
                        "type": "silk",
                        "price": "9"
                    },
                    {
                        "choice": "e",
                        "name": "Blood Moss",
                        "type": "moss",
                        "price": "6"
                    },
                    {
                        "choice": "f",
                        "name": "Black Pearl",
                        "type": "pearl",
                        "price": "7"
                    }
                ],
                "id": "Paws",
                "name": "The Magics",
                "owner": "Sheila"
            },
            {
                "reagent": [
                    {
                        "choice": "a",
                        "name": "Sulfurous Ash",
                        "type": "ash",
                        "price": "6"
                    },
                    {
                        "choice": "b",
                        "name": "Ginseng",
                        "type": "ginseng",
                        "price": "7"
                    },
                    {
                        "choice": "c",
                        "name": "Garlic",
                        "type": "garlic",
                        "price": "9"
                    },
                    {
                        "choice": "d",
                        "name": "Spider Silk",
                        "type": "silk",
                        "price": "9"
                    },
                    {
                        "choice": "e",
                        "name": "Blood Moss",
                        "type": "moss",
                        "price": "9"
                    },
                    {
                        "choice": "f",
                        "name": "Black Pearl",
                        "type": "pearl",
                        "price": "1"
                    }
                ],
                "id": "Buccaneers Den",
                "name": "Magic Mentar",
                "owner": "Shannon"
            }
        ],
        "id": "Reagents",
        "noun": "reagent"
    },
    {
        "intro": {
            "music": {
                "type": "shopping"
            },
            "input": {
                "type": "choice",
                "options": "yn",
                "target": "show_services"
            },
            "text": " Welcome unto {name} {healer} says: Peace and Joy be with you friend. Are you in need of help? "
        },
        "end": {
            "music": {
                "reset": "true"
            }
        },
        "bye": {
            "end": "",
            "text": " {healer} says: May thy life be guarded by the powers of good. "
        },
        "give_blood": {
            "if": {
                "input": {
                    "type": "choice",
                    "options": "yn",
                    "target": "gave_blood"
                },
                "test": "{party:member1:hp}>=400",
                "text": " Art thou willing to give 100pts of thy blood to aid others? "
            },
            "redirect": {
                "target": "bye"
            }
        },
        "gave_blood": [
            {
                "default": "true",
                "redirect": "bye"
            },
            {
                "karma": {
                    "action": "didnt_give_blood"
                },
                "redirect": {
                    "target": "bye"
                },
                "choice": "n"
            },
            {
                "damage": {
                    "player": "1",
                    "pts": "100"
                },
                "karma": {
                    "action": "gave_blood"
                },
                "redirect": {
                    "target": "bye"
                },
                "choice": "y",
                "text": " Thou art a great help. We are in dire need! "
            }
        ],
        "more_help": {
            "unset_context": "",
            "input": {
                "type": "choice",
                "options": "yn",
                "target": "show_services"
            },
            "text": " {healer} asks: Do you need more help? "
        },
        "show_services": [
            {
                "default": "true",
                "redirect": "give_blood"
            },
            {
                "input": {
                    "type": "choice",
                    "options": "{inventory_choices}",
                    "target": "who_needs"
                },
                "choice": "y",
                "text": " {healer} says: We can perform: {show_inventory:show_item} Your need: "
            }
        ],
        "show_item": "{toupper({choice})}-{name}",
        "who_needs": [
            {
                "choice": "null",
                "redirect": "give_blood"
            },
            {
                "context": {
                    "name": "service"
                },
                "var": [
                    {
                        "name": "service",
                        "value": "{$choice}"
                    },
                    {
                        "name": "choice",
                        "value": "1"
                    }
                ],
                "if": {
                    "test": "{party:members}==1",
                    "redirect": "will_pay"
                },
                "input": {
                    "name": "choice",
                    "type": "player",
                    "target": "will_pay"
                },
                "text": " {healer} asks: Who is in need? "
            }
        ],
        "will_pay": [
            {
                "redirect": {
                    "target": "more_help"
                },
                "choice": "null",
                "text": " No one? "
            },
            {
                "var": {
                    "name": "player",
                    "value": "{$choice}"
                },
                "if": [
                    {
                        "include": {
                            "script": "dont_need",
                            "choice": "{$service}"
                        },
                        "redirect": {
                            "target": "more_help"
                        },
                        "test": "!{party:member{$player}:needs:{type}}"
                    },
                    {
                        "redirect": {
                            "target": "more_help"
                        },
                        "test": "{party:gold}<{price}",
                        "text": " I see by thy purse that thou hast not enough gold. I cannot aid thee. "
                    }
                ],
                "input": {
                    "type": "choice",
                    "options": "yn",
                    "target": "heal"
                },
                "text": " {desc} will cost thee {price}gp. Wilt thou pay? "
            }
        ],
        "heal": [
            {
                "default": "true",
                "redirect": "more_help"
            },
            {
                "pay": {
                    "price": "{price}",
                    "quantity": "1"
                },
                "cast_spell": "",
                "heal": {
                    "type": "{type}",
                    "player": "{$player}"
                },
                "redirect": {
                    "target": "more_help"
                },
                "choice": "y"
            }
        ],
        "dont_need": [
            {
                "choice": "a",
                "text": " Thou suffers not from Poison!"
            },
            {
                "choice": "b",
                "text": " Thou art already quite healthy!"
            },
            {
                "choice": "c",
                "text": " Thou art not dead fool!"
            }
        ],
        "vendor": [
            {
                "service": [
                    {
                        "choice": "a",
                        "name": "Curing",
                        "desc": "A curing",
                        "price": "100",
                        "type": "cure"
                    },
                    {
                        "choice": "b",
                        "name": "Healing",
                        "desc": "A healing",
                        "price": "200",
                        "type": "fullheal"
                    },
                    {
                        "choice": "c",
                        "name": "Resurrection",
                        "desc": "Resurrection",
                        "price": "300",
                        "type": "resurrect"
                    }
                ],
                "id": "Britannia",
                "name": "The Royal Healer",
                "healer": "Pendragon"
            },
            {
                "service": [
                    {
                        "choice": "a",
                        "name": "Curing",
                        "desc": "A curing",
                        "price": "100",
                        "type": "cure"
                    },
                    {
                        "choice": "b",
                        "name": "Healing",
                        "desc": "A healing",
                        "price": "200",
                        "type": "fullheal"
                    },
                    {
                        "choice": "c",
                        "name": "Resurrection",
                        "desc": "Resurrection",
                        "price": "300",
                        "type": "resurrect"
                    }
                ],
                "id": "Moonglow",
                "name": "The Healer",
                "healer": "Harmony"
            },
            {
                "service": [
                    {
                        "choice": "a",
                        "name": "Curing",
                        "desc": "A curing",
                        "price": "100",
                        "type": "cure"
                    },
                    {
                        "choice": "b",
                        "name": "Healing",
                        "desc": "A healing",
                        "price": "200",
                        "type": "fullheal"
                    },
                    {
                        "choice": "c",
                        "name": "Resurrection",
                        "desc": "Resurrection",
                        "price": "300",
                        "type": "resurrect"
                    }
                ],
                "id": "Britain",
                "name": "Wound Healing",
                "healer": "Celest"
            },
            {
                "service": [
                    {
                        "choice": "a",
                        "name": "Curing",
                        "desc": "A curing",
                        "price": "100",
                        "type": "cure"
                    },
                    {
                        "choice": "b",
                        "name": "Healing",
                        "desc": "A healing",
                        "price": "200",
                        "type": "fullheal"
                    },
                    {
                        "choice": "c",
                        "name": "Resurrection",
                        "desc": "Resurrection",
                        "price": "300",
                        "type": "resurrect"
                    }
                ],
                "id": "Jhelom",
                "name": "Heal and Health",
                "healer": "Triplet"
            },
            {
                "service": [
                    {
                        "choice": "a",
                        "name": "Curing",
                        "desc": "A curing",
                        "price": "100",
                        "type": "cure"
                    },
                    {
                        "choice": "b",
                        "name": "Healing",
                        "desc": "A healing",
                        "price": "200",
                        "type": "fullheal"
                    },
                    {
                        "choice": "c",
                        "name": "Resurrection",
                        "desc": "Resurrection",
                        "price": "300",
                        "type": "resurrect"
                    }
                ],
                "id": "Yew",
                "name": "Just Healing",
                "healer": "Justin"
            },
            {
                "service": [
                    {
                        "choice": "a",
                        "name": "Curing",
                        "desc": "A curing",
                        "price": "100",
                        "type": "cure"
                    },
                    {
                        "choice": "b",
                        "name": "Healing",
                        "desc": "A healing",
                        "price": "200",
                        "type": "fullheal"
                    },
                    {
                        "choice": "c",
                        "name": "Resurrection",
                        "desc": "Resurrection",
                        "price": "300",
                        "type": "resurrect"
                    }
                ],
                "id": "Skara Brae",
                "name": "The Mystic Heal",
                "healer": "Spiran"
            },
            {
                "service": [
                    {
                        "choice": "a",
                        "name": "Curing",
                        "desc": "A curing",
                        "price": "100",
                        "type": "cure"
                    },
                    {
                        "choice": "b",
                        "name": "Healing",
                        "desc": "A healing",
                        "price": "200",
                        "type": "fullheal"
                    },
                    {
                        "choice": "c",
                        "name": "Resurrection",
                        "desc": "Resurrection",
                        "price": "300",
                        "type": "resurrect"
                    }
                ],
                "id": "Lycaeum",
                "name": "The Truth Healer",
                "healer": "Starfire"
            },
            {
                "service": [
                    {
                        "choice": "a",
                        "name": "Curing",
                        "desc": "A curing",
                        "price": "100",
                        "type": "cure"
                    },
                    {
                        "choice": "b",
                        "name": "Healing",
                        "desc": "A healing",
                        "price": "200",
                        "type": "fullheal"
                    },
                    {
                        "choice": "c",
                        "name": "Resurrection",
                        "desc": "Resurrection",
                        "price": "300",
                        "type": "resurrect"
                    }
                ],
                "id": "Empath Abbey",
                "name": "The Love Healer",
                "healer": "Salle'"
            },
            {
                "service": [
                    {
                        "choice": "a",
                        "name": "Curing",
                        "desc": "A curing",
                        "price": "100",
                        "type": "cure"
                    },
                    {
                        "choice": "b",
                        "name": "Healing",
                        "desc": "A healing",
                        "price": "200",
                        "type": "fullheal"
                    },
                    {
                        "choice": "c",
                        "name": "Resurrection",
                        "desc": "Resurrection",
                        "price": "300",
                        "type": "resurrect"
                    }
                ],
                "id": "Serpents Hold",
                "name": "The Courage Healer",
                "healer": "Windwalker"
            },
            {
                "service": [
                    {
                        "choice": "a",
                        "name": "Curing",
                        "desc": "A curing",
                        "price": "100",
                        "type": "cure"
                    },
                    {
                        "choice": "b",
                        "name": "Healing",
                        "desc": "A healing",
                        "price": "200",
                        "type": "fullheal"
                    },
                    {
                        "choice": "c",
                        "name": "Resurrection",
                        "desc": "Resurrection",
                        "price": "300",
                        "type": "resurrect"
                    }
                ],
                "id": "Cove",
                "name": "The Healer Shop",
                "healer": "Quat"
            }
        ],
        "id": "Healer",
        "noun": "service"
    },
    {
        "intro": {
            "music": {
                "type": "shopping"
            },
            "if": {
                "test": "{party:transport}=horse",
                "redirect": "nohorse"
            },
            "input": {
                "type": "choice",
                "options": "yn",
                "target": "ask"
            },
            "text": " The Innkeeper says: Welcome to {name} I am {innkeeper}. Are you in need of lodging? "
        },
        "end": {
            "music": {
                "reset": "true"
            }
        },
        "bye": {
            "end": "",
            "text": " {innkeeper} says: Then you have come to the wrong place! Good day. "
        },
        "nohorse": {
            "end": "",
            "text": "Get that horse out of here!!! "
        },
        "ask": [
            {
                "default": "true",
                "redirect": "bye"
            },
            {
                "choice": "n",
                "redirect": "bye"
            }
        ],
        "rent": [
            {
                "default": "true",
                "redirect": "no_better_deal"
            },
            {
                "choice": "y",
                "redirect": "stay"
            },
            {
                "choice": "1",
                "redirect": "stay"
            },
            {
                "choice": "2",
                "redirect": "stay"
            },
            {
                "choice": "3",
                "redirect": "stay"
            }
        ],
        "no_better_deal": {
            "end": "",
            "text": " You won't find a better deal in this towne! "
        },
        "stay": {
            "context": {
                "name": "room"
            },
            "pay": {
                "price": "{price}",
                "quantity": "1",
                "cantpay": "cantpay"
            },
            "cursor": {
                "enable": "false"
            },
            "move": {
                "x": "{x}",
                "y": "{y}"
            },
            "random": {
                "wait": {
                    "msecs": "1000"
                },
                "chance": "25%",
                "text": " Oh, and don't mind the strange noises, it's only rats! "
            },
            "sleep": "",
            "end": "",
            "text": " Very good. Have a pleasant night. "
        },
        "cantpay": {
            "end": "",
            "text": " If you can't pay, you can't stay! Good Bye. "
        },
        "vendor": [
            {
                "room": {
                    "choice": "y",
                    "price": "20",
                    "x": "28",
                    "y": "6"
                },
                "ask": {
                    "input": {
                        "type": "choice",
                        "options": "yn",
                        "target": "rent"
                    },
                    "choice": "y",
                    "text": " We have a room with 2 beds that rents for 20gp. Take it? "
                },
                "id": "Moonglow",
                "name": "The Honest Inn",
                "innkeeper": "Scatu"
            },
            {
                "room": {
                    "choice": "y",
                    "price": "15",
                    "x": "29",
                    "y": "6"
                },
                "ask": {
                    "input": {
                        "type": "choice",
                        "options": "yn",
                        "target": "rent"
                    },
                    "choice": "y",
                    "text": " We have a modest sized room with 1 bed for 15 gp. Take it? "
                },
                "id": "Britain",
                "name": "Britannia Manor",
                "innkeeper": "Jason"
            },
            {
                "room": {
                    "choice": "y",
                    "price": "10",
                    "x": "10",
                    "y": "26"
                },
                "ask": {
                    "input": {
                        "type": "choice",
                        "options": "yn",
                        "target": "rent"
                    },
                    "choice": "y",
                    "text": " We have a very secure room of modest size and 1 bed for 10gp. Take it? "
                },
                "id": "Jhelom",
                "name": "The Inn of Ends",
                "innkeeper": "Smirk"
            },
            {
                "room": [
                    {
                        "choice": "1",
                        "price": "30",
                        "x": "2",
                        "y": "6"
                    },
                    {
                        "choice": "2",
                        "price": "60",
                        "x": "2",
                        "y": "2"
                    },
                    {
                        "choice": "3",
                        "price": "90",
                        "x": "8",
                        "y": "2"
                    }
                ],
                "ask": {
                    "input": {
                        "type": "choice",
                        "options": "0123",
                        "target": "rent"
                    },
                    "choice": "y",
                    "text": " We have three rooms available, a 1, 2 and 3 bed room for 30, 60 and 90 gp each. 1, 2 or 3 beds? "
                },
                "id": "Minoc",
                "name": "Wayfarer's Inn",
                "innkeeper": "Estro",
                "rooms": "3"
            },
            {
                "room": {
                    "choice": "y",
                    "price": "15",
                    "x": "29",
                    "y": "2"
                },
                "ask": {
                    "input": {
                        "type": "choice",
                        "options": "yn",
                        "target": "rent"
                    },
                    "choice": "y",
                    "text": " We have a single bed room with a back door for 15gp. Take it? "
                },
                "id": "Trinsic",
                "name": "Honorable Inn",
                "innkeeper": "Zajac"
            },
            {
                "room": {
                    "choice": "y",
                    "price": "5",
                    "x": "28",
                    "y": "11"
                },
                "ask": {
                    "input": {
                        "type": "choice",
                        "options": "yn",
                        "target": "rent"
                    },
                    "choice": "y",
                    "text": " Unfortunately, I have but only a very small room with 1 bed: worse yet, it's haunted! If you do wish to stay it costs 5gp. Take it? "
                },
                "id": "Skara Brae",
                "name": "The Inn of the Spirits",
                "innkeeper": "Tyrone"
            },
            {
                "room": {
                    "choice": "y",
                    "price": "1",
                    "x": "25",
                    "y": "23"
                },
                "ask": {
                    "input": {
                        "type": "choice",
                        "options": "yn",
                        "target": "rent"
                    },
                    "choice": "y",
                    "text": " All we have is that cot over there. But it is comfortable, and only 1 gp. Take it? "
                },
                "id": "Vesper",
                "name": "The Sleep Shop",
                "innkeeper": "Tymus"
            }
        ],
        "id": "Inn",
        "noun": "room"
    },
    {
        "intro": {
            "music": {
                "type": "shopping"
            },
            "ztats": {
                "screen": "equipment"
            },
            "input": {
                "type": "choice",
                "options": "yn",
                "target": "show_goods"
            },
            "text": " Avast ye mate! Shure ye wishes to buy from ol' {owner}? {owner} says: Welcome to {name}. Like to see my goods? "
        },
        "end": {
            "music": {
                "reset": "true"
            },
            "ztats": {
                "screen": "party"
            }
        },
        "bye": {
            "unset_context": "",
            "end": "",
            "text": " {owner} says: See ya matie! "
        },
        "show_goods": [
            {
                "default": "true",
                "redirect": "bye"
            },
            {
                "input": {
                    "type": "choice",
                    "options": "{inventory_choices}",
                    "target": "tell_about"
                },
                "choice": "y",
                "text": " {owner} says: Good Mate! Ya see I gots: {show_inventory:show_item} Wat'l it be? "
            }
        ],
        "show_item": "{toupper({choice})}-{name}",
        "tell_about": [
            {
                "default": "true",
                "redirect": "bye"
            },
            {
                "context": {
                    "name": "item"
                },
                "redirect": {
                    "target": "will_buy"
                },
                "choice": "a",
                "text": " I can give ya {quant} long lasting Torches for a mere {price}gp. "
            },
            {
                "context": {
                    "name": "item"
                },
                "redirect": {
                    "target": "will_buy"
                },
                "choice": "b",
                "text": " I've got magical mapping Gems, {quant} for only {price}gp. "
            },
            {
                "context": {
                    "name": "item"
                },
                "redirect": {
                    "target": "will_buy"
                },
                "choice": "c",
                "text": " Magical Keys, 1 use each, a fair price at {price}gp for {quant}. "
            },
            {
                "context": {
                    "name": "item"
                },
                "redirect": {
                    "target": "will_buy"
                },
                "choice": "d",
                "text": " So...Ya want a Sextant...Well I gots one which I might part with fer {price} gold! "
            }
        ],
        "will_buy": {
            "var": {
                "name": "item",
                "value": "{$choice}"
            },
            "input": {
                "type": "choice",
                "options": "yn",
                "target": "buy_item"
            },
            "text": " Will ya buy? "
        },
        "buy_item": [
            {
                "redirect": {
                    "target": "bye"
                },
                "default": "true",
                "choice": "n",
                "text": " Hmmm...Grmbl... "
            },
            {
                "redirect": {
                    "target": "buy",
                    "choice": "{$item}"
                },
                "choice": "y"
            }
        ],
        "buy": {
            "pay": {
                "price": "{price}",
                "quantity": "1",
                "cantpay": "cantpay"
            },
            "add": {
                "type": "{type}",
                "quantity": "{quant}"
            },
            "redirect": {
                "target": "see_more"
            },
            "text": " Fine... fine... "
        },
        "cantpay": {
            "end": "",
            "text": " What? Can't pay! Buzz off swine! "
        },
        "see_more": {
            "unset_context": "",
            "input": {
                "type": "choice",
                "options": "yn",
                "target": "show_goods"
            },
            "text": " {owner} says: See more? "
        },
        "vendor": [
            {
                "item": [
                    {
                        "choice": "a",
                        "name": "Torches",
                        "price": "50",
                        "quant": "5",
                        "type": "torch"
                    },
                    {
                        "choice": "b",
                        "name": "Magic Gems",
                        "price": "60",
                        "quant": "5",
                        "type": "gem"
                    },
                    {
                        "choice": "c",
                        "name": "Magic Keys",
                        "price": "60",
                        "quant": "6",
                        "type": "key"
                    },
                    {
                        "choice": "d",
                        "hidden": "true",
                        "name": "Sextant",
                        "price": "900",
                        "quant": "1",
                        "type": "sextant"
                    }
                ],
                "id": "Vesper",
                "name": "The Guild Shop",
                "owner": "Long John Leary"
            },
            {
                "item": [
                    {
                        "choice": "a",
                        "name": "Torches",
                        "price": "50",
                        "quant": "5",
                        "type": "torch"
                    },
                    {
                        "choice": "b",
                        "name": "Magic Gems",
                        "price": "60",
                        "quant": "5",
                        "type": "gem"
                    },
                    {
                        "choice": "c",
                        "name": "Magic Keys",
                        "price": "60",
                        "quant": "6",
                        "type": "key"
                    },
                    {
                        "choice": "d",
                        "hidden": "true",
                        "name": "Sextant",
                        "price": "900",
                        "quant": "1",
                        "type": "sextant"
                    }
                ],
                "id": "Buccaneers Den",
                "name": "Pirate's Guild",
                "owner": "One Eyed Willey"
            }
        ],
        "id": "Guild",
        "noun": "item"
    },
    {
        "intro": {
            "music": {
                "type": "shopping"
            },
            "input": {
                "type": "choice",
                "options": "yn",
                "target": "ask"
            },
            "text": " Welcome friend! Can I interest thee in horses? "
        },
        "end": {
            "music": {
                "reset": "true"
            }
        },
        "bye": {
            "end": "",
            "text": " A shame, thou looks like thou could use a good horse! "
        },
        "ask": [
            {
                "default": "true",
                "redirect": "bye"
            },
            {
                "input": {
                    "type": "choice",
                    "options": "yn",
                    "target": "buy"
                },
                "choice": "y",
                "text": " For only {price}g.p. Thou can have the best! Wilt thou buy? "
            }
        ],
        "buy": [
            {
                "default": "true",
                "redirect": "bye"
            },
            {
                "pay": {
                    "price": "{price}",
                    "quantity": "1",
                    "cantpay": "cantpay"
                },
                "add": {
                    "type": "horse"
                },
                "end": "",
                "choice": "y",
                "text": " Here, a better breed thou shalt not find ever! "
            }
        ],
        "cantpay": {
            "end": "",
            "text": " It seems thou hast not gold enough to pay! "
        },
        "vendor": {
            "id": "Paws",
            "price": "{math({party:members}*100)}"
        },
        "id": "Stable"
    }
]
